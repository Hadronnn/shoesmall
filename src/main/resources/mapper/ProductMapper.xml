<?xml version="1.0" encoding="UTF-8" ?>
        <!DOCTYPE mapper
                PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
                "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oaec.shoes.mapper.ProductMapper">
    <select id="queryAll" resultType="product">
        SELECT * FROM product WHERE state = 0 ORDER BY SALES_VOLUME DESC
    </select>
    <select id="queryByProductId" parameterType="int" resultType="product">
        SELECT * FROM product WHERE state = 0 AND product_id = #{productId}
    </select>
    <select id="queryLike" parameterType="string" resultType="product">
        SELECT * FROM product WHERE state = 0 AND PRODUCT_NAME LIKE #{name} ORDER BY SALES_VOLUME DESC
    </select>
    <select id="queryBySortId" resultType="product">
        SELECT * FROM product WHERE state = 0 AND SORT_ID = #{sortId} ORDER BY SALES_VOLUME DESC
    </select>
    <select id="queryByBrandId" resultType="product">
        SELECT * FROM product WHERE state = 0 AND BRAND_ID = #{brandId} ORDER BY SALES_VOLUME DESC
    </select>
    <select id="queryBySortIdAndBrandId" resultType="product">
        SELECT * FROM product WHERE state = 0 AND SORT_ID = #{sortId} AND BRAND_ID = #{brandId} ORDER BY SALES_VOLUME DESC
    </select>
    <update id="updateStockAndSalesVolume" >
        UPDATE product SET STOCK = STOCK - #{num},SALES_VOLUME = SALES_VOLUME + #{num} WHERE PRODUCT_ID = #{productId}
    </update>
</mapper>